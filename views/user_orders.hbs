<link rel="stylesheet" href="css/styles_user_orders.css">
<script src="scripts/userOrdersScript.js"></script>

<div class="d-flex flex-column content"> 
  <div class="container">
    <h2>My Order</h2>
    <br>
    {{type}}
    {{#if has_order}}
    <div class="d-flex flex-row justify-content-between title">
      <h4 class="item-name"><b>Status</b> (refresh the page to get latest status)</h4>
    </div>
    <div class="status">
      <div class="card d-flex flex-row justify-content-between home-box">
        <div class="home-col1">
          <button type="button" class="btn btn-outline-dark btn-block home-date">{{dateFormat details.date_time "MMM Do, YYYY"}}</button>
        </div>

        <div class="home-col1">
          <button type="button" class="btn btn-outline-dark btn-block home-date">{{dateFormat details.date_time "LTS"}}</button>
        </div>
            
        <div class="home-col1">
          {{#if details.is_completed}}
          <buttontype="button" class="btn btn-success btn-block home-status" data-toggle="modal" data-target="#myModal">Completed</button>
          {{else}}
          <buttontype="button" class="btn btn-warning btn-block home-status" data-toggle="modal" data-target="#myModal">Pending</button>
          {{/if}}
        </div>  
      </div>      
    </div>
    <!-- The Modal -->
    <div class="modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Status</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
          <div class="modal-body">
            {{#if details.is_completed}}
            Your order has been completed
            {{else}}
            Your order is currently being processed
            {{/if}}
          </div>
        </div>
      </div>
    </div>

    <br>
    <br>
    <br>

    <div class="d-flex flex-row justify-content-between title">
        <h4 class="item-name"><b>Order Details</b></h4>
    </div>
    <div class="d-flex flex-row justify-content-between title">
      <h4 class="item-name">Item</h4>
      <h4 class="item-col">Price</h4>
      <h4 class="item-col">Quantity</h4>
      <h4 class="item-col">Total</h4>
    </div>
    <div class="card">
      {{#each order}}
      <div class="d-flex flex-row justify-content-between item detail">
        <h4 class="item-name">{{this.name}}</h4>
        <h4 class="item-col">Php {{this.price}}</h4>
        <h4 class="item-col">{{this.quantity}}</h4>
        <h4 class="item-col total">Php {{this.total}}</h4>
      </div>
        {{#if @last}}
        {{else}}
          <hr>
        {{/if}}
      {{/each}}
    </div>
    <hr>
    <div class="d-flex flex-row justify-content-end title">
      <h4 class="item-name"></h4>
      <h4 class="item-col"</h4>
      <h4 class="item-col">Grand Total</h4>
      <h4 id="grandtotal" class="item-col important">Loading..,</h4>
    </div>

    <br>
    <br>
    <br>

    <div class="d-flex flex-row justify-content-between title">
      <h4 class="item-name"><b>Delivery Details</b></h4>
    </div>
    <div class="card item">
      <div class="form-group">
        <label><h5>Address:</h5></label>
        <textarea id="address"class="form-control" rows="5" id="comment" readonly>{{details.address}}</textarea>
      </div> 
        <div class="form-group">
          <label><h5>Contact No.</h5></label>
          <input id="contact" class="form-control" value="{{details.mobile}}" readonly>
        </div>
        <div class="form-group">
          <label><h5>Special Instructions:</h5></label>
          <textarea id="special_instructions"class="form-control" rows="3" id="comment" readonly>{{details.special_instructions}}</textarea>
        </div> 
    </div>
    <br>
    {{else}}
    <div class="d-flex flex-column title">
      <h4 class="item-name"><b>You currently have no ongoing order</b></h4>
      <h5 class="item-name"><a href="/order">Order here</a></h5>
    </div>
    {{/if}}
  </div>
</div>
